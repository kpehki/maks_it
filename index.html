<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Таймер</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            overflow: hidden;
            background: #000;
            color: white;
        }
        #timer {
            font-size: 2em;
            margin-top: 20px;
            position: relative;
            z-index: 10;
        }
        .face {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            user-select: none;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>МАКС УЧИТ ЛИНЬ УЖЕ</h1>
    <div id="timer"></div>

    <script>
        function getTimeSinceMarchFirst() {
            var marchFirst = new Date("2024-03-01T00:00:00");
            var now = new Date();
            var difference = now.getTime() - marchFirst.getTime();

            var days = Math.floor(difference / (1000 * 60 * 60 * 24));
            var hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((difference % (1000 * 60)) / 1000);

            return { days, hours, minutes, seconds };
        }

        function updateTimer() {
            var t = getTimeSinceMarchFirst();
            document.getElementById("timer").innerHTML =
                t.days + " дней, " + t.hours + " часов, " +
                t.minutes + " минут, " + t.seconds + " секунд";
        }

        setInterval(updateTimer, 1000);
        updateTimer();

        let faces = [];
        const MAX_FACES = 50;

        function createFaces() {
            let t = getTimeSinceMarchFirst();
            let count = Math.floor(t.days / 100);

            for (let i = faces.length; i < count && faces.length < MAX_FACES; i++) {
                let img = document.createElement("img");
                img.src = "max.jpg";
                img.classList.add("face");
                img.style.position = "absolute";
                document.body.appendChild(img);

                let face = {
                    el: img,
                    x: Math.random() * (window.innerWidth - 100),
                    y: Math.random() * (window.innerHeight - 100),
                    dx: (Math.random() < 0.5 ? -1 : 1) * (2 + Math.random() * 2),
                    dy: (Math.random() < 0.5 ? -1 : 1) * (2 + Math.random() * 2),
                    size: 100
                };
                faces.push(face);
            }
        }

        function checkCollisions() {
            for (let i = 0; i < faces.length; i++) {
                for (let j = i + 1; j < faces.length; j++) {
                    let a = faces[i];
                    let b = faces[j];

                    let dx = a.x - b.x;
                    let dy = a.y - b.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < a.size) {
                        let tempDx = a.dx;
                        let tempDy = a.dy;
                        a.dx = b.dx;
                        a.dy = b.dy;
                        b.dx = tempDx;
                        b.dy = tempDy;

                        let overlap = a.size - distance;
                        let pushX = (dx / distance) * (overlap / 2);
                        let pushY = (dy / distance) * (overlap / 2);

                        a.x += pushX;
                        a.y += pushY;
                        b.x -= pushX;
                        b.y -= pushY;
                    }
                }
            }
        }

        let frameCount = 0;
        function animateFaces() {
            faces.forEach(face => {
                face.x += face.dx;
                face.y += face.dy;

                if (face.x <= 0 || face.x + face.size >= window.innerWidth) face.dx *= -1;
                if (face.y <= 0 || face.y + face.size >= window.innerHeight) face.dy *= -1;

                face.el.style.left = face.x + "px";
                face.el.style.top = face.y + "px";
            });

            frameCount++;
            if (frameCount % 3 === 0) checkCollisions();

            requestAnimationFrame(animateFaces);
        }

        createFaces();
        animateFaces();
        setInterval(createFaces, 60000);
    </script>
</body>
</html>
